# Blockchain Experiments

# BitcoinCash

Bitcoin Cash é uma criptomoeda criada no dia 1 de agosto de 2017, em um processo de hard fork, separação, da Bitcoin. Trata-se da mais bem-sucedida bifurcação do bitcoin. Durante o processo de criação, todos os usuários de Bitcoin tiveram suas reservas privadas duplicadas, sendo as duplicatas nomeadas de "Bitcoin Cash", uma criptomoeda aparte do Bitcoin original, com propriedades técnicas distintas. É regida por um protocolo alternativo que aumenta a capacidade de transação em comparação ao Bitcoin "clássico", sendo este o ponto principal do fork. Isto será permitido graças ao tamanho de bloco diferenciado, de 8 MB. Este bloco, maior, em comparação ao original, visa auxiliar na correção do problema de escalabilidade, uma solução alternativa àquela adotada pelo Bitcoin, o SegWit (Segregated Witness), assim chamada a otimização de código polêmica que será ativada na blockchain do Bitcoin principal. Em 19 de dezembro de 2017, a Coinbase passou a permitir o depósito de Bitcoin Cash, o que permitiu que os usuários que possuiam Bitcoin na plataforma no momento do Hard Fork obtivessem uma quantia equivalente em Bitcoin Cash.<br/>

Existem várias semelhanças entre Bitcoin e Bitcoin Cash. Ambos usam o mecanismo de consenso Proof of Work (PoW) para minerar novas moedas. Eles também compartilham os serviços da Bitmain, a maior mineradora de criptomoedas do mundo. O fornecimento de Bitcoin Cash é limitado a 21 milhões, o mesmo valor do Bitcoin. O Bitcoin Cash também começou usando o mesmo algoritmo de dificuldade de mineração - conhecido tecnicamente como Ajuste de Dificuldade de Emergência (EDA) - que ajusta a dificuldade a cada 2016 blocos ou aproximadamente a cada dois semanas.<br/>

Os mineradores aproveitaram essa semelhança alternando sua atividade de mineração entre Bitcoin e Bitcoin Cash. Embora fosse lucrativo para os mineradores, a prática foi prejudicial para o aumento da oferta de Bitcoin Cash nos mercados. Portanto, o Bitcoin Cash revisou seu algoritmo EDA para facilitar a geração da criptomoeda pelos mineradores. <br/>

As criptomoedas não possuem gatekeepers centralizados para verificar a precisão de novas transações e dados que são adicionados ao blockchain. Em vez disso, eles contam com uma rede distribuída de participantes para validar as transações recebidas e adicioná-las como novos blocos na cadeia. <br/>

A prova de trabalho é um mecanismo de consenso para escolher quais desses participantes da rede – chamados de mineradores – têm permissão para lidar com a lucrativa tarefa de verificar novos dados. É lucrativo porque os mineradores são recompensados com novas criptomoedas quando validam com precisão os novos dados e não enganam o sistema. <br/>

A prova de trabalho (PoW) é uma forma de prova criptográfica na qual uma parte (o provador) prova a outras (os verificadores) que uma certa quantidade de um esforço computacional específico foi gasto. Os verificadores podem posteriormente confirmar esta despesa com um esforço mínimo da sua parte. O conceito foi inventado por Cynthia Dwork e Moni Naor em 1993 como uma maneira de impedir ataques de negação de serviço e outros abusos de serviço, como spam em uma rede, exigindo algum trabalho de um solicitante de serviço, geralmente significando tempo de processamento por um computador. O termo "prova de trabalho" foi cunhado e formalizado pela primeira vez em um artigo de 1999 por Markus Jakobsson e Ari Juels. A prova de trabalho foi mais tarde popularizada pelo Bitcoin como uma base para o consenso na rede descentralizada sem permissão, na qual os mineradores competem para anexar blocos e cunhar novas moedas, cada minerador experimentando uma probabilidade de sucesso proporcional ao esforço computacional gasto. PoW e PoS (prova de participação) são os dois mecanismos de dissuasão Sybil mais conhecidos. No contexto das criptomoedas são os mecanismos mais comuns. <br/>

Uma característica chave dos esquemas de prova de trabalho é sua assimetria: o trabalho – a computação – deve ser moderadamente difícil (ainda que viável) do lado do provador ou solicitante, mas fácil de verificar para o verificador ou provedor de serviços. Essa ideia também é conhecida como função de custo da CPU, quebra-cabeça do cliente, quebra-cabeça computacional ou função de precificação da CPU. Outra característica comum são as estruturas de incentivo embutidas que recompensam a alocação de capacidade computacional à rede com valor na forma de dinheiro. <br/>

O objetivo dos algoritmos de prova de trabalho não é provar que determinado trabalho foi realizado ou que um quebra-cabeça computacional foi "resolvido", mas impedir a manipulação de dados estabelecendo grandes requisitos de energia e controle de hardware para poder fazê-lo. Os sistemas de prova de trabalho têm sido criticados por ambientalistas por seu consumo de energia. <br/>

“Proof of work é um algoritmo de software usado pelo Bitcoin e outros blockchains para garantir que os blocos sejam considerados válidos apenas se exigirem uma certa quantidade de poder computacional para serem produzidos”, diz Amaury Sechet, fundador da criptomoeda eCash. “É um mecanismo de consenso que permite que entidades anônimas em redes descentralizadas confiem umas nas outras.” <br/>

O “trabalho” na prova de trabalho é fundamental: o sistema exige que os mineradores compitam entre si para serem os primeiros a resolver quebra-cabeças matemáticos arbitrários para impedir que alguém jogue no sistema. O vencedor desta corrida é selecionado para adicionar o mais novo lote de dados ou transações ao blockchain. <br/>

Os mineradores vencedores só recebem sua recompensa de nova criptomoeda depois que outros participantes da rede verificarem se os dados adicionados à cadeia estão corretos e válidos. <br/>

A primeira criptomoeda, Bitcoin, foi criada por Satoshi Nakamoto em 2008. Nakamoto publicou um famoso white paper descrevendo uma moeda digital baseada em protocolos de prova de trabalho que permitiriam transações seguras ponto a ponto sem o envolvimento de uma autoridade centralizada. <br/>

Um dos problemas que impediram o desenvolvimento de uma moeda digital eficaz no passado foi chamado de problema do gasto duplo. Criptomoeda são apenas dados, portanto, é preciso haver um mecanismo para evitar que os usuários gastem as mesmas unidades em lugares diferentes antes que o sistema possa registrar as transações. <br/>

Embora você tenha dificuldade em gastar a mesma nota de dólar em duas compras separadas, qualquer pessoa que tenha duplicado um arquivo de computador copiando e colando provavelmente pode imaginar como você poderia gastar dinheiro digital duas vezes – até dez vezes ou mais. O mecanismo de consenso de Nakamoto resolveu o problema do gasto duplo. Ao incentivar os mineradores a verificar a integridade de novas transações de criptografia antes de adicioná-las ao livro-razão distribuído que é blockchain, a prova de trabalho ajuda a evitar gastos duplos. <br/>

Considere uma conta bancária convencional. Se você depositar um cheque em sua conta poupança, como você sabe que será creditado pelo valor exato? Como o emissor do cheque confia que só será debitado o valor que escreveu no cheque? O valor de um banco é que todas as partes de uma transação confiam no banco para movimentar dinheiro com precisão. <br/>

De acordo com o New York Times, em 2009 você poderia minerar um Bitcoin usando um computador desktop comum e uma quantidade insignificante de eletricidade. Mas em 2021, você precisaria consumir uma quantidade de eletricidade igual à que uma casa americana padrão usaria em nove anos para minerar um Bitcoin. <br/>

Um dos recursos mais atraentes para os investidores em criptomoedas é a descentralização. Graças às intensas demandas computacionais e energéticas da prova de trabalho, no entanto, as operações de mineração tornaram-se centralizadas em um pequeno número de grandes equipamentos. Isso poderia levar algumas entidades a controlar a maioria das operações de criptomoeda. <br/>

# Proof of Work:

Uma questão fundamental na blockchain é: quem (qual nó) pode propor um novo bloco? Sabemos que a blockchain pública é uma rede aberta, formada por nós desconhecidos e sem uma autoridade central. Assim, é necessário a existência de um mecanismo que selecione quem tem o direito de propor um bloco em um dado momento.Isto é: um mecanismo capaz de manter o consenso na rede. Um mecanismo de consenso é um processo de acordo entre nós, mutuamente suspeitos, sobre uma mesma mensagem ou estado da blockchain. <br/>

Para garantir que todos os full nodes da rede tenham a mesma cadeia de blocos, apenas um nó deve propor um bloco por vez. Em seguida, todos os outros nós devem validar as transações do bloco e adicioná-lo às suas blockchains se concordarem que as transações é válidas. <br/>

Mecanismos de consenso na blockchain vêm da teoria dos jogos. Seu sistema deve ser projetado de tal forma que os nós obtenham o maior benefício se eles seguirem as regras. Um dos aspectos para garantir que os nós se comportem honestamente é recompensar o comportamento honesto e punir por atividades fraudulentas Atualmente, os dois principais mecanismos de consenso usados em blockchains são Proof of Work (PoW) e Proof of Stake (PoS). <br/>

Há diferentes formas de chegar a um consenso entre os nós, dependendo do caso de uso. O mecanismo deve ser capaz de manter o consenso e a rede funcionando oferecendo algum incentivo aos nós para a blockchain ser autossustentável. <br/>

A Prova de Trabalho (Proof of Work) consiste em o usuário provar que gastou algum tempo para encontrar uma resposta que satisfaça um desafio computacional proposto pelo protocolo. <br/>

PoW é baseado em dois princípios:
- A prova dever ser difícil de ser produzida;
- Mas deve ser fácil de ser verificada. <br/>

A prova deve ser difícil e trabalhosa de se produzir, mas não impossível. Neste contexto o termo “difícil” deve ser entendido como uma solução algo que exige um grande poder computacional e alguns minutos de cálculo. Consequentemente, é financeiramente caro, devido a energia elétrica gasta durante o cálculo da solução. A verificação da solução deve ser rápida e fácil de ser executada pelos demais nós. <br/>

O processo de gerar um novo bloco é chamado de mineração e os nós que executam esse processo são chamados de mineradores. Cada nó minerador inicia esse processo ordenando, com base no timestamp, as transações que recebeu. Em seguida, o nó grava as transações em um bloco (um tipo de rascunho do bloco a ser proposto), sobre o qual será calculado a PoW. <br/>

A PoW é calculada aplicando-se uma função hash, SHA256, ao cabeçalho do bloco. O cabeçalho do bloco possui, entre outros campos, um nonce (número usado apenas uma vez). Os mineradores devem modificar o nonce frequentemente para obter um hash que satisfaça o critério de dificuldade (ou valor alvo). Assim, por definição, a saída desta função é um número entre 0 e 2^256. <br/>

A mudança sistemática de nonce pelo minerador durante o cálculo da PoW visa encontrar uma colisão de hash parcial. Ou seja, o minerador deve encontrar um valor hash que seja igual ou menor que o valor alvo. <br/>

Claramente, a dificuldade de encontrar um hash que satisfaça o desafio aumenta a medida que a quantidade de zeros aumenta no inicio do hash e diminui o espaço de possibilidades. Portanto, encontrar um hash que satisfaça essa colisão parcial, depende essencialmente do poder computacional do nó minerador. Quando um nó encontra uma solução válida, ele propaga o bloco para os outros nós e todos devem confirmar mutuamente a validade do hash encontrado. Se o bloco for validado, diz-se que o bloco foi minerado e os demais nós anexam esse novo bloco a suas próprias blockchains armazenadas localmente. <br/>

O processo de mineração acontece de forma independente e simultaneamente por cada um dos full nodes. Note que, todos os mineradores da rede competem entre si para encontrar uma solução válida. O primeiro que encontrar tem o direito de propor o novo bloco. <br/>




